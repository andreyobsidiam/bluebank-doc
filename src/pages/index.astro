---
import BaseLayout from "../layouts/BaseLayout.astro";
import Sidebar from "../components/Sidebar.astro";
import { getCollection } from "astro:content";

const docs = await getCollection("docs");
const sortedDocs = docs.sort(
  (a, b) => (a.data.order || 99) - (b.data.order || 99)
);

// Group docs by section
const docsBySection = {
  mobile: sortedDocs.filter((d) => d.data.section === "mobile"),
  web: sortedDocs.filter((d) => d.data.section === "web"),
  api: sortedDocs.filter((d) => d.data.section === "api" || !d.data.section),
};

const sections = [
  {
    id: "mobile",
    title: "Mobile App",
    subtitle: "Flutter & Clean Architecture",
    icon: "üì±",
    color: "from-pink-500 to-rose-600",
    borderColor: "border-pink-500/30",
    docs: docsBySection.mobile,
  },
  {
    id: "web",
    title: "Web Admin",
    subtitle: "Next.js & React",
    icon: "üåê",
    color: "from-cyan-500 to-blue-600",
    borderColor: "border-cyan-500/30",
    docs: docsBySection.web,
  },
  {
    id: "api",
    title: "API Backend",
    subtitle: "Supabase & Edge Functions",
    icon: "‚ö°",
    color: "from-emerald-500 to-teal-600",
    borderColor: "border-emerald-500/30",
    docs: docsBySection.api,
  },
];
---

<BaseLayout title="Inicio">
  <Sidebar />

  <div class="flex-1 ml-72">
    <!-- Hero Section -->
    <section class="relative overflow-hidden">
      <div
        class="absolute inset-0 bg-gradient-to-br from-bluebank-900/50 via-slate-900 to-slate-950"
      >
      </div>
      <div
        class="absolute inset-0"
        style="background-image: radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 50%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);"
      >
      </div>

      <div class="relative max-w-4xl mx-auto px-8 py-24 text-center">
        <img
          src="/logo_blue.png"
          alt="Blue Bank Logo"
          class="h-20 w-auto mx-auto mb-8"
        />

        <div
          class="inline-flex items-center gap-2 px-4 py-2 bg-bluebank-600/20 border border-bluebank-500/30 rounded-full text-sm text-bluebank-400 mb-8"
        >
          <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          Documentaci√≥n Actualizada ‚Ä¢ Enero 2026
        </div>

        <h1 class="text-5xl md:text-6xl font-bold mb-6">
          <span class="text-gradient">Blue Bank</span>
          <br />
          <span class="text-white">Documentation Hub</span>
        </h1>

        <p class="text-xl text-gray-400 mb-12 max-w-2xl mx-auto">
          Centro de documentaci√≥n t√©cnica para la plataforma bancaria Blue Bank
          International. Mobile, Web y API ‚Äî todo en un solo lugar.
        </p>

        <div class="flex flex-wrap gap-4 justify-center">
          <a
            href="#platforms"
            class="px-8 py-4 bg-bluebank-600 hover:bg-bluebank-500 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 glow-sm hover:glow"
          >
            Explorar Plataformas ‚Üí
          </a>
          <a
            href="https://github.com/bluebank"
            target="_blank"
            class="px-8 py-4 bg-slate-800 hover:bg-slate-700 text-white font-semibold rounded-xl border border-slate-700 transition-all duration-300"
          >
            Ver en GitHub
          </a>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="border-y border-slate-800 bg-slate-900/30">
      <div class="max-w-5xl mx-auto px-8 py-12">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
          <div class="text-center">
            <p class="text-4xl font-bold text-gradient">3</p>
            <p class="text-gray-400 mt-2">Plataformas</p>
          </div>
          <div class="text-center">
            <p class="text-4xl font-bold text-gradient">11</p>
            <p class="text-gray-400 mt-2">P√°ginas de Docs</p>
          </div>
          <div class="text-center">
            <p class="text-4xl font-bold text-gradient">100%</p>
            <p class="text-gray-400 mt-2">Espa√±ol</p>
          </div>
          <div class="text-center">
            <p class="text-4xl font-bold text-gradient">RLS</p>
            <p class="text-gray-400 mt-2">Seguridad</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Platforms Section -->
    <section class="max-w-6xl mx-auto px-8 py-16" id="platforms">
      <h2 class="text-3xl font-bold text-white mb-2 text-center">
        Plataformas
      </h2>
      <p class="text-gray-400 mb-12 text-center max-w-2xl mx-auto">
        Documentaci√≥n organizada por plataforma para una navegaci√≥n m√°s
        eficiente
      </p>

      <div class="grid md:grid-cols-3 gap-8">
        {
          sections.map((section) => (
            <div
              class={`glass-card p-6 border ${section.borderColor} hover:border-opacity-60 transition-all duration-300 flex flex-col`}
            >
              <div class="flex items-center gap-3 mb-4">
                <div
                  class={`w-12 h-12 rounded-xl bg-gradient-to-br ${section.color} flex items-center justify-center text-2xl shadow-lg`}
                >
                  {section.icon}
                </div>
                <div>
                  <h3 class="text-lg font-bold text-white">{section.title}</h3>
                  <p class="text-sm text-gray-400">{section.subtitle}</p>
                </div>
              </div>

              <ul class="space-y-2 mt-6 flex-1">
                {section.docs.map((doc) => (
                  <li>
                    <a
                      href={`/docs/${doc.slug}`}
                      class="flex items-center gap-2 text-gray-300 hover:text-white transition-colors py-1 group"
                    >
                      <span class="text-lg">{doc.data.icon}</span>
                      <span class="text-sm group-hover:translate-x-1 transition-transform">
                        {doc.data.title}
                      </span>
                    </a>
                  </li>
                ))}
              </ul>

              {section.docs.length > 0 && (
                <a
                  href={`/docs/${section.docs[0].slug}`}
                  class={`mt-6 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r ${section.color} text-white text-sm font-medium hover:shadow-lg transition-all w-full`}
                >
                  Comenzar
                  <span>‚Üí</span>
                </a>
              )}
            </div>
          ))
        }
      </div>
    </section>

    <!-- Tech Stack -->
    <section class="border-t border-slate-800 bg-slate-900/20">
      <div class="max-w-5xl mx-auto px-8 py-16">
        <h2 class="text-2xl font-bold text-white text-center mb-12">
          Stack Tecnol√≥gico
        </h2>
        <div class="flex flex-wrap justify-center gap-4">
          {
            [
              { name: "Flutter", color: "from-sky-400 to-sky-600" },
              { name: "Next.js", color: "from-gray-600 to-gray-800" },
              { name: "React", color: "from-cyan-400 to-cyan-600" },
              { name: "Supabase", color: "from-emerald-500 to-emerald-600" },
              { name: "TypeScript", color: "from-blue-500 to-blue-600" },
              { name: "PostgreSQL", color: "from-indigo-500 to-indigo-600" },
              { name: "Deno", color: "from-gray-500 to-gray-600" },
              { name: "TailwindCSS", color: "from-teal-400 to-teal-600" },
            ].map((tech) => (
              <div
                class={`px-5 py-2.5 rounded-xl bg-gradient-to-r ${tech.color} text-white font-medium shadow-lg text-sm`}
              >
                {tech.name}
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-slate-800 px-8 py-8">
      <div class="max-w-5xl mx-auto text-center">
        <p class="text-gray-500">
          ¬© 2026 Blue Bank International. Todos los derechos reservados.
        </p>
      </div>
    </footer>
  </div>
</BaseLayout>
